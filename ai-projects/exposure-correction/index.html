<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.145.0">
    <meta name="generator" content="Relearn 7.6.0+b932d301d7838f3c1a50e318e216b55ce5cc9148">
    <meta name="description" content="1. é¡¹ç›®èƒŒæ™¯ æœ€è¿‘åœ¨åšä¸€ä¸ªç›‘æ§è§†é¢‘ç†è§£çš„é¡¹ç›®ï¼Œå‘ç°è®¸å¤šç›‘æ§ç”»é¢å­˜åœ¨ä¸¥é‡çš„çª—å£åŒºåŸŸè¿‡æ›é—®é¢˜â€”â€”ç”±äºçª—å¤–å…‰çº¿è¿‡å¼ºï¼Œæ‘„åƒå¤´æ‹æ‘„çš„çª—æˆ·åŒºåŸŸå¸¸å‘ˆç°ä¸€ç‰‡æƒ¨ç™½ï¼Œç»†èŠ‚å®Œå…¨ä¸¢å¤±ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å°è¯•ç”¨ä¼ ç»Ÿå›¾åƒå¤„ç†æ–¹æ³•è®¾è®¡äº†ä¸€å¥—æ›å…‰æ ¡æ­£æ–¹æ¡ˆã€‚æœ¬æ–‡å°†è¯¦ç»†è§£è¯»æ ¸å¿ƒæ€è·¯å’Œå®ç°æµç¨‹ã€‚
2. è®¾è®¡ç†å¿µ è¯¥æ›å…‰æ ¡æ­£æ–¹æ¡ˆçš„æ ¸å¿ƒç›®æ ‡æ˜¯è§£å†³ç›‘æ§æ‘„åƒå¤´æ‹æ‘„ç”»é¢ä¸­çª—å£åŒºåŸŸçš„è¿‡æ›é—®é¢˜ã€‚è®¾è®¡æ€è·¯ä¸»è¦å›´ç»•ä»¥ä¸‹å‡ ä¸ªå…³é”®ç‚¹å±•å¼€ï¼š
2.1 åŒºåŸŸåˆ†å‰² é—®é¢˜èƒŒæ™¯ï¼š
åœ¨ç›‘æ§æ‘„åƒå¤´æ‹æ‘„çš„ç”»é¢ä¸­ï¼Œçª—å£åŒºåŸŸé€šå¸¸ä½äºå›¾åƒå·¦ä¾§ ç”±äºå¤–éƒ¨å…‰çº¿å¼ºçƒˆï¼Œè¿™äº›åŒºåŸŸå®¹æ˜“å‡ºç°è¿‡æ›ç°è±¡ è§£å†³æ–¹æ¡ˆï¼š
å‡è®¾çª—å£åŒºåŸŸä½äºå›¾åƒå·¦ä¾§ï¼Œé€šè¿‡ window_region_ratio å‚æ•°æŒ‡å®šçª—å£åŒºåŸŸçš„æ¯”ä¾‹ï¼ˆé»˜è®¤ä¸º0.4ï¼‰ å…·ä½“å®ç°ä¸ºï¼šwindow_roi = flow[:, :int(w * window_region_ratio)] ä½¿ç”¨æ©ç ï¼ˆwindow_maskï¼‰æ ‡è®°çª—å£åŒºåŸŸï¼Œç”¨äºåç»­å®šå‘å¤„ç† 2.2 å¤šé‡æ›å…‰èåˆ é—®é¢˜èƒŒæ™¯ï¼š
è¿‡æ›åŒºåŸŸäº®åº¦å€¼è¿‡é«˜ï¼Œå¯¼è‡´ç»†èŠ‚ä¸¢å¤± éœ€è¦é€šè¿‡é™ä½äº®åº¦æ¥æ¢å¤ç»†èŠ‚ è§£å†³æ–¹æ¡ˆï¼š
ä½¿ç”¨ä¼½é©¬æ ¡æ­£ç”Ÿæˆä¸åŒæ›å…‰ç‰ˆæœ¬çš„å›¾åƒï¼š æš—ç‰ˆæœ¬ï¼šé€šè¿‡ä¼½é©¬æ ¡æ­£ï¼ˆgamma_brightï¼‰é™ä½äº®åº¦ï¼Œç”¨äºå¤„ç†è¿‡æ›åŒºåŸŸ äº®ç‰ˆæœ¬ï¼šé€šè¿‡ä¼½é©¬æ ¡æ­£ï¼ˆgamma_darkï¼‰æé«˜äº®åº¦ï¼ˆå½“å‰ä»£ç ä¸­æœªä½¿ç”¨ï¼‰ åŸºäºç»„åˆæ©ç ï¼ˆcombined_maskï¼‰èåˆä¸åŒæ›å…‰ç‰ˆæœ¬ï¼š è¿‡æ›åŒºåŸŸä½¿ç”¨æš—ç‰ˆæœ¬ å…¶ä»–åŒºåŸŸä¿æŒåŸå›¾ 2.3 å±€éƒ¨ä¼˜åŒ– é—®é¢˜èƒŒæ™¯ï¼š
å…¨å±€å¯¹æ¯”åº¦å¢å¼ºå¯èƒ½å¯¼è‡´å±€éƒ¨åŒºåŸŸè¿‡äº®æˆ–è¿‡æš— éœ€è¦è¿›è¡Œæ›´ç»†è‡´çš„å±€éƒ¨è°ƒæ•´ è§£å†³æ–¹æ¡ˆï¼š
åœ¨äº®åº¦é€šé“ï¼ˆLé€šé“ï¼‰ä¸Šä½¿ç”¨CLAHEï¼ˆå¯¹æ¯”åº¦å—é™è‡ªé€‚åº”ç›´æ–¹å›¾å‡è¡¡ï¼‰å¢å¼ºå±€éƒ¨å¯¹æ¯”åº¦ å°†å›¾åƒè½¬æ¢åˆ°LABè‰²å½©ç©ºé—´ï¼Œå¯¹Lé€šé“åº”ç”¨CLAHEï¼Œç„¶ååˆå¹¶å›RGBå›¾åƒ 3. å¤„ç†æµç¨‹ æ•´ä¸ªæ›å…‰æ ¡æ­£ç³»ç»Ÿçš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š
è¾“å…¥å¤„ç†
æ”¯æŒå•å¼ å›¾ç‰‡ã€ç›®å½•æˆ–é€šé…ç¬¦è¾“å…¥ æ ¹æ®è¾“å…¥ç±»å‹é€‰æ‹©ç›¸åº”çš„å¤„ç†è·¯å¾„ å›¾åƒåŠ è½½ä¸é¢„å¤„ç†
ä½¿ç”¨OpenCVåŠ è½½å›¾åƒ è°ƒç”¨ExposureCorrectionç±»çš„correctæ–¹æ³•è¿›è¡Œæ›å…‰æ ¡æ­£ çª—å£åŒºåŸŸå¤„ç†
åŸºäºå·¦ä¾§æ¯”ä¾‹ç”Ÿæˆçª—å£åŒºåŸŸæ©ç  åœ¨HSVè‰²å½©ç©ºé—´ä¸­æ£€æµ‹è¿‡æ›åŒºåŸŸï¼ˆåƒç´ äº®åº¦&gt;220ï¼‰ ç»“åˆçª—å£æ©ç å’Œè¿‡æ›åŒºåŸŸç”Ÿæˆèåˆæƒé‡æ©ç  å¤šé‡æ›å…‰èåˆ
ç”Ÿæˆæ˜æš—ä¸¤ä¸ªç‰ˆæœ¬ åŸºäºæ©ç è¿›è¡Œå›¾åƒèåˆ å¯¹æ¯”åº¦å¢å¼º
åœ¨LABè‰²å½©ç©ºé—´ä¸­å¯¹Lé€šé“åº”ç”¨CLAHE å¢å¼ºå±€éƒ¨ç»†èŠ‚ ç»“æœè¾“å‡º
ä¿å­˜æ ¡æ­£åçš„å›¾åƒ ç”ŸæˆåŸå›¾ä¸æ ¡æ­£å›¾çš„å¯¹æ¯”è§†å›¾ 4. ä»£ç å®ç° 4.1 æ ¸å¿ƒç±»è®¾è®¡ class ExposureCorrection: &#34;&#34;&#34;ç”¨äºæ ¡æ­£è¿‡æ›å›¾åƒçš„ç±»&#34;&#34;&#34; def __init__(self, window_region_ratio=None, clahe_clip=None): &#34;&#34;&#34; åˆå§‹åŒ–æ›å…‰æ ¡æ­£å™¨ å‚æ•°: window_region_ratio: å›¾åƒå·¦ä¾§è¢«è§†ä¸ºçª—å£åŒºåŸŸçš„æ¯”ä¾‹ clahe_clip: CLAHEå¯¹æ¯”åº¦é™åˆ¶å‚æ•° &#34;&#34;&#34; self.window_region_ratio = window_region_ratio or config.EXPOSURE_WINDOW_REGION_RATIO self.clahe_clip = clahe_clip or config.EXPOSURE_CORRECTION_CLAHE_CLIP self.clahe = cv2.createCLAHE(clipLimit=self.clahe_clip, tileGridSize=config.CLAHE_GRID_SIZE) æ ¸å¿ƒç±» ExposureCorrection å®ç°äº†æ•´ä¸ªæ›å…‰æ ¡æ­£çš„é€»è¾‘ã€‚æ„é€ å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå…³é”®å‚æ•°ï¼š">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="ç›‘æ§è§†é¢‘çª—å£è¿‡æ›æ ¡æ­£æ–¹æ¡ˆè®¾è®¡ :: AK-journey">
    <meta name="twitter:description" content="1. é¡¹ç›®èƒŒæ™¯ æœ€è¿‘åœ¨åšä¸€ä¸ªç›‘æ§è§†é¢‘ç†è§£çš„é¡¹ç›®ï¼Œå‘ç°è®¸å¤šç›‘æ§ç”»é¢å­˜åœ¨ä¸¥é‡çš„çª—å£åŒºåŸŸè¿‡æ›é—®é¢˜â€”â€”ç”±äºçª—å¤–å…‰çº¿è¿‡å¼ºï¼Œæ‘„åƒå¤´æ‹æ‘„çš„çª—æˆ·åŒºåŸŸå¸¸å‘ˆç°ä¸€ç‰‡æƒ¨ç™½ï¼Œç»†èŠ‚å®Œå…¨ä¸¢å¤±ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å°è¯•ç”¨ä¼ ç»Ÿå›¾åƒå¤„ç†æ–¹æ³•è®¾è®¡äº†ä¸€å¥—æ›å…‰æ ¡æ­£æ–¹æ¡ˆã€‚æœ¬æ–‡å°†è¯¦ç»†è§£è¯»æ ¸å¿ƒæ€è·¯å’Œå®ç°æµç¨‹ã€‚
2. è®¾è®¡ç†å¿µ è¯¥æ›å…‰æ ¡æ­£æ–¹æ¡ˆçš„æ ¸å¿ƒç›®æ ‡æ˜¯è§£å†³ç›‘æ§æ‘„åƒå¤´æ‹æ‘„ç”»é¢ä¸­çª—å£åŒºåŸŸçš„è¿‡æ›é—®é¢˜ã€‚è®¾è®¡æ€è·¯ä¸»è¦å›´ç»•ä»¥ä¸‹å‡ ä¸ªå…³é”®ç‚¹å±•å¼€ï¼š
2.1 åŒºåŸŸåˆ†å‰² é—®é¢˜èƒŒæ™¯ï¼š
åœ¨ç›‘æ§æ‘„åƒå¤´æ‹æ‘„çš„ç”»é¢ä¸­ï¼Œçª—å£åŒºåŸŸé€šå¸¸ä½äºå›¾åƒå·¦ä¾§ ç”±äºå¤–éƒ¨å…‰çº¿å¼ºçƒˆï¼Œè¿™äº›åŒºåŸŸå®¹æ˜“å‡ºç°è¿‡æ›ç°è±¡ è§£å†³æ–¹æ¡ˆï¼š
å‡è®¾çª—å£åŒºåŸŸä½äºå›¾åƒå·¦ä¾§ï¼Œé€šè¿‡ window_region_ratio å‚æ•°æŒ‡å®šçª—å£åŒºåŸŸçš„æ¯”ä¾‹ï¼ˆé»˜è®¤ä¸º0.4ï¼‰ å…·ä½“å®ç°ä¸ºï¼šwindow_roi = flow[:, :int(w * window_region_ratio)] ä½¿ç”¨æ©ç ï¼ˆwindow_maskï¼‰æ ‡è®°çª—å£åŒºåŸŸï¼Œç”¨äºåç»­å®šå‘å¤„ç† 2.2 å¤šé‡æ›å…‰èåˆ é—®é¢˜èƒŒæ™¯ï¼š
è¿‡æ›åŒºåŸŸäº®åº¦å€¼è¿‡é«˜ï¼Œå¯¼è‡´ç»†èŠ‚ä¸¢å¤± éœ€è¦é€šè¿‡é™ä½äº®åº¦æ¥æ¢å¤ç»†èŠ‚ è§£å†³æ–¹æ¡ˆï¼š
ä½¿ç”¨ä¼½é©¬æ ¡æ­£ç”Ÿæˆä¸åŒæ›å…‰ç‰ˆæœ¬çš„å›¾åƒï¼š æš—ç‰ˆæœ¬ï¼šé€šè¿‡ä¼½é©¬æ ¡æ­£ï¼ˆgamma_brightï¼‰é™ä½äº®åº¦ï¼Œç”¨äºå¤„ç†è¿‡æ›åŒºåŸŸ äº®ç‰ˆæœ¬ï¼šé€šè¿‡ä¼½é©¬æ ¡æ­£ï¼ˆgamma_darkï¼‰æé«˜äº®åº¦ï¼ˆå½“å‰ä»£ç ä¸­æœªä½¿ç”¨ï¼‰ åŸºäºç»„åˆæ©ç ï¼ˆcombined_maskï¼‰èåˆä¸åŒæ›å…‰ç‰ˆæœ¬ï¼š è¿‡æ›åŒºåŸŸä½¿ç”¨æš—ç‰ˆæœ¬ å…¶ä»–åŒºåŸŸä¿æŒåŸå›¾ 2.3 å±€éƒ¨ä¼˜åŒ– é—®é¢˜èƒŒæ™¯ï¼š
å…¨å±€å¯¹æ¯”åº¦å¢å¼ºå¯èƒ½å¯¼è‡´å±€éƒ¨åŒºåŸŸè¿‡äº®æˆ–è¿‡æš— éœ€è¦è¿›è¡Œæ›´ç»†è‡´çš„å±€éƒ¨è°ƒæ•´ è§£å†³æ–¹æ¡ˆï¼š
åœ¨äº®åº¦é€šé“ï¼ˆLé€šé“ï¼‰ä¸Šä½¿ç”¨CLAHEï¼ˆå¯¹æ¯”åº¦å—é™è‡ªé€‚åº”ç›´æ–¹å›¾å‡è¡¡ï¼‰å¢å¼ºå±€éƒ¨å¯¹æ¯”åº¦ å°†å›¾åƒè½¬æ¢åˆ°LABè‰²å½©ç©ºé—´ï¼Œå¯¹Lé€šé“åº”ç”¨CLAHEï¼Œç„¶ååˆå¹¶å›RGBå›¾åƒ 3. å¤„ç†æµç¨‹ æ•´ä¸ªæ›å…‰æ ¡æ­£ç³»ç»Ÿçš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š
è¾“å…¥å¤„ç†
æ”¯æŒå•å¼ å›¾ç‰‡ã€ç›®å½•æˆ–é€šé…ç¬¦è¾“å…¥ æ ¹æ®è¾“å…¥ç±»å‹é€‰æ‹©ç›¸åº”çš„å¤„ç†è·¯å¾„ å›¾åƒåŠ è½½ä¸é¢„å¤„ç†
ä½¿ç”¨OpenCVåŠ è½½å›¾åƒ è°ƒç”¨ExposureCorrectionç±»çš„correctæ–¹æ³•è¿›è¡Œæ›å…‰æ ¡æ­£ çª—å£åŒºåŸŸå¤„ç†
åŸºäºå·¦ä¾§æ¯”ä¾‹ç”Ÿæˆçª—å£åŒºåŸŸæ©ç  åœ¨HSVè‰²å½©ç©ºé—´ä¸­æ£€æµ‹è¿‡æ›åŒºåŸŸï¼ˆåƒç´ äº®åº¦&gt;220ï¼‰ ç»“åˆçª—å£æ©ç å’Œè¿‡æ›åŒºåŸŸç”Ÿæˆèåˆæƒé‡æ©ç  å¤šé‡æ›å…‰èåˆ
ç”Ÿæˆæ˜æš—ä¸¤ä¸ªç‰ˆæœ¬ åŸºäºæ©ç è¿›è¡Œå›¾åƒèåˆ å¯¹æ¯”åº¦å¢å¼º
åœ¨LABè‰²å½©ç©ºé—´ä¸­å¯¹Lé€šé“åº”ç”¨CLAHE å¢å¼ºå±€éƒ¨ç»†èŠ‚ ç»“æœè¾“å‡º
ä¿å­˜æ ¡æ­£åçš„å›¾åƒ ç”ŸæˆåŸå›¾ä¸æ ¡æ­£å›¾çš„å¯¹æ¯”è§†å›¾ 4. ä»£ç å®ç° 4.1 æ ¸å¿ƒç±»è®¾è®¡ class ExposureCorrection: &#34;&#34;&#34;ç”¨äºæ ¡æ­£è¿‡æ›å›¾åƒçš„ç±»&#34;&#34;&#34; def __init__(self, window_region_ratio=None, clahe_clip=None): &#34;&#34;&#34; åˆå§‹åŒ–æ›å…‰æ ¡æ­£å™¨ å‚æ•°: window_region_ratio: å›¾åƒå·¦ä¾§è¢«è§†ä¸ºçª—å£åŒºåŸŸçš„æ¯”ä¾‹ clahe_clip: CLAHEå¯¹æ¯”åº¦é™åˆ¶å‚æ•° &#34;&#34;&#34; self.window_region_ratio = window_region_ratio or config.EXPOSURE_WINDOW_REGION_RATIO self.clahe_clip = clahe_clip or config.EXPOSURE_CORRECTION_CLAHE_CLIP self.clahe = cv2.createCLAHE(clipLimit=self.clahe_clip, tileGridSize=config.CLAHE_GRID_SIZE) æ ¸å¿ƒç±» ExposureCorrection å®ç°äº†æ•´ä¸ªæ›å…‰æ ¡æ­£çš„é€»è¾‘ã€‚æ„é€ å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå…³é”®å‚æ•°ï¼š">
    <meta property="og:url" content="https://wangxupeng.github.io/ai-projects/exposure-correction/index.html">
    <meta property="og:site_name" content="AK-journey">
    <meta property="og:title" content="ç›‘æ§è§†é¢‘çª—å£è¿‡æ›æ ¡æ­£æ–¹æ¡ˆè®¾è®¡ :: AK-journey">
    <meta property="og:description" content="1. é¡¹ç›®èƒŒæ™¯ æœ€è¿‘åœ¨åšä¸€ä¸ªç›‘æ§è§†é¢‘ç†è§£çš„é¡¹ç›®ï¼Œå‘ç°è®¸å¤šç›‘æ§ç”»é¢å­˜åœ¨ä¸¥é‡çš„çª—å£åŒºåŸŸè¿‡æ›é—®é¢˜â€”â€”ç”±äºçª—å¤–å…‰çº¿è¿‡å¼ºï¼Œæ‘„åƒå¤´æ‹æ‘„çš„çª—æˆ·åŒºåŸŸå¸¸å‘ˆç°ä¸€ç‰‡æƒ¨ç™½ï¼Œç»†èŠ‚å®Œå…¨ä¸¢å¤±ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å°è¯•ç”¨ä¼ ç»Ÿå›¾åƒå¤„ç†æ–¹æ³•è®¾è®¡äº†ä¸€å¥—æ›å…‰æ ¡æ­£æ–¹æ¡ˆã€‚æœ¬æ–‡å°†è¯¦ç»†è§£è¯»æ ¸å¿ƒæ€è·¯å’Œå®ç°æµç¨‹ã€‚
2. è®¾è®¡ç†å¿µ è¯¥æ›å…‰æ ¡æ­£æ–¹æ¡ˆçš„æ ¸å¿ƒç›®æ ‡æ˜¯è§£å†³ç›‘æ§æ‘„åƒå¤´æ‹æ‘„ç”»é¢ä¸­çª—å£åŒºåŸŸçš„è¿‡æ›é—®é¢˜ã€‚è®¾è®¡æ€è·¯ä¸»è¦å›´ç»•ä»¥ä¸‹å‡ ä¸ªå…³é”®ç‚¹å±•å¼€ï¼š
2.1 åŒºåŸŸåˆ†å‰² é—®é¢˜èƒŒæ™¯ï¼š
åœ¨ç›‘æ§æ‘„åƒå¤´æ‹æ‘„çš„ç”»é¢ä¸­ï¼Œçª—å£åŒºåŸŸé€šå¸¸ä½äºå›¾åƒå·¦ä¾§ ç”±äºå¤–éƒ¨å…‰çº¿å¼ºçƒˆï¼Œè¿™äº›åŒºåŸŸå®¹æ˜“å‡ºç°è¿‡æ›ç°è±¡ è§£å†³æ–¹æ¡ˆï¼š
å‡è®¾çª—å£åŒºåŸŸä½äºå›¾åƒå·¦ä¾§ï¼Œé€šè¿‡ window_region_ratio å‚æ•°æŒ‡å®šçª—å£åŒºåŸŸçš„æ¯”ä¾‹ï¼ˆé»˜è®¤ä¸º0.4ï¼‰ å…·ä½“å®ç°ä¸ºï¼šwindow_roi = flow[:, :int(w * window_region_ratio)] ä½¿ç”¨æ©ç ï¼ˆwindow_maskï¼‰æ ‡è®°çª—å£åŒºåŸŸï¼Œç”¨äºåç»­å®šå‘å¤„ç† 2.2 å¤šé‡æ›å…‰èåˆ é—®é¢˜èƒŒæ™¯ï¼š
è¿‡æ›åŒºåŸŸäº®åº¦å€¼è¿‡é«˜ï¼Œå¯¼è‡´ç»†èŠ‚ä¸¢å¤± éœ€è¦é€šè¿‡é™ä½äº®åº¦æ¥æ¢å¤ç»†èŠ‚ è§£å†³æ–¹æ¡ˆï¼š
ä½¿ç”¨ä¼½é©¬æ ¡æ­£ç”Ÿæˆä¸åŒæ›å…‰ç‰ˆæœ¬çš„å›¾åƒï¼š æš—ç‰ˆæœ¬ï¼šé€šè¿‡ä¼½é©¬æ ¡æ­£ï¼ˆgamma_brightï¼‰é™ä½äº®åº¦ï¼Œç”¨äºå¤„ç†è¿‡æ›åŒºåŸŸ äº®ç‰ˆæœ¬ï¼šé€šè¿‡ä¼½é©¬æ ¡æ­£ï¼ˆgamma_darkï¼‰æé«˜äº®åº¦ï¼ˆå½“å‰ä»£ç ä¸­æœªä½¿ç”¨ï¼‰ åŸºäºç»„åˆæ©ç ï¼ˆcombined_maskï¼‰èåˆä¸åŒæ›å…‰ç‰ˆæœ¬ï¼š è¿‡æ›åŒºåŸŸä½¿ç”¨æš—ç‰ˆæœ¬ å…¶ä»–åŒºåŸŸä¿æŒåŸå›¾ 2.3 å±€éƒ¨ä¼˜åŒ– é—®é¢˜èƒŒæ™¯ï¼š
å…¨å±€å¯¹æ¯”åº¦å¢å¼ºå¯èƒ½å¯¼è‡´å±€éƒ¨åŒºåŸŸè¿‡äº®æˆ–è¿‡æš— éœ€è¦è¿›è¡Œæ›´ç»†è‡´çš„å±€éƒ¨è°ƒæ•´ è§£å†³æ–¹æ¡ˆï¼š
åœ¨äº®åº¦é€šé“ï¼ˆLé€šé“ï¼‰ä¸Šä½¿ç”¨CLAHEï¼ˆå¯¹æ¯”åº¦å—é™è‡ªé€‚åº”ç›´æ–¹å›¾å‡è¡¡ï¼‰å¢å¼ºå±€éƒ¨å¯¹æ¯”åº¦ å°†å›¾åƒè½¬æ¢åˆ°LABè‰²å½©ç©ºé—´ï¼Œå¯¹Lé€šé“åº”ç”¨CLAHEï¼Œç„¶ååˆå¹¶å›RGBå›¾åƒ 3. å¤„ç†æµç¨‹ æ•´ä¸ªæ›å…‰æ ¡æ­£ç³»ç»Ÿçš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š
è¾“å…¥å¤„ç†
æ”¯æŒå•å¼ å›¾ç‰‡ã€ç›®å½•æˆ–é€šé…ç¬¦è¾“å…¥ æ ¹æ®è¾“å…¥ç±»å‹é€‰æ‹©ç›¸åº”çš„å¤„ç†è·¯å¾„ å›¾åƒåŠ è½½ä¸é¢„å¤„ç†
ä½¿ç”¨OpenCVåŠ è½½å›¾åƒ è°ƒç”¨ExposureCorrectionç±»çš„correctæ–¹æ³•è¿›è¡Œæ›å…‰æ ¡æ­£ çª—å£åŒºåŸŸå¤„ç†
åŸºäºå·¦ä¾§æ¯”ä¾‹ç”Ÿæˆçª—å£åŒºåŸŸæ©ç  åœ¨HSVè‰²å½©ç©ºé—´ä¸­æ£€æµ‹è¿‡æ›åŒºåŸŸï¼ˆåƒç´ äº®åº¦&gt;220ï¼‰ ç»“åˆçª—å£æ©ç å’Œè¿‡æ›åŒºåŸŸç”Ÿæˆèåˆæƒé‡æ©ç  å¤šé‡æ›å…‰èåˆ
ç”Ÿæˆæ˜æš—ä¸¤ä¸ªç‰ˆæœ¬ åŸºäºæ©ç è¿›è¡Œå›¾åƒèåˆ å¯¹æ¯”åº¦å¢å¼º
åœ¨LABè‰²å½©ç©ºé—´ä¸­å¯¹Lé€šé“åº”ç”¨CLAHE å¢å¼ºå±€éƒ¨ç»†èŠ‚ ç»“æœè¾“å‡º
ä¿å­˜æ ¡æ­£åçš„å›¾åƒ ç”ŸæˆåŸå›¾ä¸æ ¡æ­£å›¾çš„å¯¹æ¯”è§†å›¾ 4. ä»£ç å®ç° 4.1 æ ¸å¿ƒç±»è®¾è®¡ class ExposureCorrection: &#34;&#34;&#34;ç”¨äºæ ¡æ­£è¿‡æ›å›¾åƒçš„ç±»&#34;&#34;&#34; def __init__(self, window_region_ratio=None, clahe_clip=None): &#34;&#34;&#34; åˆå§‹åŒ–æ›å…‰æ ¡æ­£å™¨ å‚æ•°: window_region_ratio: å›¾åƒå·¦ä¾§è¢«è§†ä¸ºçª—å£åŒºåŸŸçš„æ¯”ä¾‹ clahe_clip: CLAHEå¯¹æ¯”åº¦é™åˆ¶å‚æ•° &#34;&#34;&#34; self.window_region_ratio = window_region_ratio or config.EXPOSURE_WINDOW_REGION_RATIO self.clahe_clip = clahe_clip or config.EXPOSURE_CORRECTION_CLAHE_CLIP self.clahe = cv2.createCLAHE(clipLimit=self.clahe_clip, tileGridSize=config.CLAHE_GRID_SIZE) æ ¸å¿ƒç±» ExposureCorrection å®ç°äº†æ•´ä¸ªæ›å…‰æ ¡æ­£çš„é€»è¾‘ã€‚æ„é€ å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå…³é”®å‚æ•°ï¼š">
    <meta property="og:locale" content="en_us">
    <meta property="og:type" content="article">
    <meta property="article:section" content="AIé¡¹ç›®åˆ†äº«">
    <meta property="article:published_time" content="2024-04-04T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-04-04T00:00:00+00:00">
    <meta itemprop="name" content="ç›‘æ§è§†é¢‘çª—å£è¿‡æ›æ ¡æ­£æ–¹æ¡ˆè®¾è®¡ :: AK-journey">
    <meta itemprop="description" content="1. é¡¹ç›®èƒŒæ™¯ æœ€è¿‘åœ¨åšä¸€ä¸ªç›‘æ§è§†é¢‘ç†è§£çš„é¡¹ç›®ï¼Œå‘ç°è®¸å¤šç›‘æ§ç”»é¢å­˜åœ¨ä¸¥é‡çš„çª—å£åŒºåŸŸè¿‡æ›é—®é¢˜â€”â€”ç”±äºçª—å¤–å…‰çº¿è¿‡å¼ºï¼Œæ‘„åƒå¤´æ‹æ‘„çš„çª—æˆ·åŒºåŸŸå¸¸å‘ˆç°ä¸€ç‰‡æƒ¨ç™½ï¼Œç»†èŠ‚å®Œå…¨ä¸¢å¤±ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å°è¯•ç”¨ä¼ ç»Ÿå›¾åƒå¤„ç†æ–¹æ³•è®¾è®¡äº†ä¸€å¥—æ›å…‰æ ¡æ­£æ–¹æ¡ˆã€‚æœ¬æ–‡å°†è¯¦ç»†è§£è¯»æ ¸å¿ƒæ€è·¯å’Œå®ç°æµç¨‹ã€‚
2. è®¾è®¡ç†å¿µ è¯¥æ›å…‰æ ¡æ­£æ–¹æ¡ˆçš„æ ¸å¿ƒç›®æ ‡æ˜¯è§£å†³ç›‘æ§æ‘„åƒå¤´æ‹æ‘„ç”»é¢ä¸­çª—å£åŒºåŸŸçš„è¿‡æ›é—®é¢˜ã€‚è®¾è®¡æ€è·¯ä¸»è¦å›´ç»•ä»¥ä¸‹å‡ ä¸ªå…³é”®ç‚¹å±•å¼€ï¼š
2.1 åŒºåŸŸåˆ†å‰² é—®é¢˜èƒŒæ™¯ï¼š
åœ¨ç›‘æ§æ‘„åƒå¤´æ‹æ‘„çš„ç”»é¢ä¸­ï¼Œçª—å£åŒºåŸŸé€šå¸¸ä½äºå›¾åƒå·¦ä¾§ ç”±äºå¤–éƒ¨å…‰çº¿å¼ºçƒˆï¼Œè¿™äº›åŒºåŸŸå®¹æ˜“å‡ºç°è¿‡æ›ç°è±¡ è§£å†³æ–¹æ¡ˆï¼š
å‡è®¾çª—å£åŒºåŸŸä½äºå›¾åƒå·¦ä¾§ï¼Œé€šè¿‡ window_region_ratio å‚æ•°æŒ‡å®šçª—å£åŒºåŸŸçš„æ¯”ä¾‹ï¼ˆé»˜è®¤ä¸º0.4ï¼‰ å…·ä½“å®ç°ä¸ºï¼šwindow_roi = flow[:, :int(w * window_region_ratio)] ä½¿ç”¨æ©ç ï¼ˆwindow_maskï¼‰æ ‡è®°çª—å£åŒºåŸŸï¼Œç”¨äºåç»­å®šå‘å¤„ç† 2.2 å¤šé‡æ›å…‰èåˆ é—®é¢˜èƒŒæ™¯ï¼š
è¿‡æ›åŒºåŸŸäº®åº¦å€¼è¿‡é«˜ï¼Œå¯¼è‡´ç»†èŠ‚ä¸¢å¤± éœ€è¦é€šè¿‡é™ä½äº®åº¦æ¥æ¢å¤ç»†èŠ‚ è§£å†³æ–¹æ¡ˆï¼š
ä½¿ç”¨ä¼½é©¬æ ¡æ­£ç”Ÿæˆä¸åŒæ›å…‰ç‰ˆæœ¬çš„å›¾åƒï¼š æš—ç‰ˆæœ¬ï¼šé€šè¿‡ä¼½é©¬æ ¡æ­£ï¼ˆgamma_brightï¼‰é™ä½äº®åº¦ï¼Œç”¨äºå¤„ç†è¿‡æ›åŒºåŸŸ äº®ç‰ˆæœ¬ï¼šé€šè¿‡ä¼½é©¬æ ¡æ­£ï¼ˆgamma_darkï¼‰æé«˜äº®åº¦ï¼ˆå½“å‰ä»£ç ä¸­æœªä½¿ç”¨ï¼‰ åŸºäºç»„åˆæ©ç ï¼ˆcombined_maskï¼‰èåˆä¸åŒæ›å…‰ç‰ˆæœ¬ï¼š è¿‡æ›åŒºåŸŸä½¿ç”¨æš—ç‰ˆæœ¬ å…¶ä»–åŒºåŸŸä¿æŒåŸå›¾ 2.3 å±€éƒ¨ä¼˜åŒ– é—®é¢˜èƒŒæ™¯ï¼š
å…¨å±€å¯¹æ¯”åº¦å¢å¼ºå¯èƒ½å¯¼è‡´å±€éƒ¨åŒºåŸŸè¿‡äº®æˆ–è¿‡æš— éœ€è¦è¿›è¡Œæ›´ç»†è‡´çš„å±€éƒ¨è°ƒæ•´ è§£å†³æ–¹æ¡ˆï¼š
åœ¨äº®åº¦é€šé“ï¼ˆLé€šé“ï¼‰ä¸Šä½¿ç”¨CLAHEï¼ˆå¯¹æ¯”åº¦å—é™è‡ªé€‚åº”ç›´æ–¹å›¾å‡è¡¡ï¼‰å¢å¼ºå±€éƒ¨å¯¹æ¯”åº¦ å°†å›¾åƒè½¬æ¢åˆ°LABè‰²å½©ç©ºé—´ï¼Œå¯¹Lé€šé“åº”ç”¨CLAHEï¼Œç„¶ååˆå¹¶å›RGBå›¾åƒ 3. å¤„ç†æµç¨‹ æ•´ä¸ªæ›å…‰æ ¡æ­£ç³»ç»Ÿçš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š
è¾“å…¥å¤„ç†
æ”¯æŒå•å¼ å›¾ç‰‡ã€ç›®å½•æˆ–é€šé…ç¬¦è¾“å…¥ æ ¹æ®è¾“å…¥ç±»å‹é€‰æ‹©ç›¸åº”çš„å¤„ç†è·¯å¾„ å›¾åƒåŠ è½½ä¸é¢„å¤„ç†
ä½¿ç”¨OpenCVåŠ è½½å›¾åƒ è°ƒç”¨ExposureCorrectionç±»çš„correctæ–¹æ³•è¿›è¡Œæ›å…‰æ ¡æ­£ çª—å£åŒºåŸŸå¤„ç†
åŸºäºå·¦ä¾§æ¯”ä¾‹ç”Ÿæˆçª—å£åŒºåŸŸæ©ç  åœ¨HSVè‰²å½©ç©ºé—´ä¸­æ£€æµ‹è¿‡æ›åŒºåŸŸï¼ˆåƒç´ äº®åº¦&gt;220ï¼‰ ç»“åˆçª—å£æ©ç å’Œè¿‡æ›åŒºåŸŸç”Ÿæˆèåˆæƒé‡æ©ç  å¤šé‡æ›å…‰èåˆ
ç”Ÿæˆæ˜æš—ä¸¤ä¸ªç‰ˆæœ¬ åŸºäºæ©ç è¿›è¡Œå›¾åƒèåˆ å¯¹æ¯”åº¦å¢å¼º
åœ¨LABè‰²å½©ç©ºé—´ä¸­å¯¹Lé€šé“åº”ç”¨CLAHE å¢å¼ºå±€éƒ¨ç»†èŠ‚ ç»“æœè¾“å‡º
ä¿å­˜æ ¡æ­£åçš„å›¾åƒ ç”ŸæˆåŸå›¾ä¸æ ¡æ­£å›¾çš„å¯¹æ¯”è§†å›¾ 4. ä»£ç å®ç° 4.1 æ ¸å¿ƒç±»è®¾è®¡ class ExposureCorrection: &#34;&#34;&#34;ç”¨äºæ ¡æ­£è¿‡æ›å›¾åƒçš„ç±»&#34;&#34;&#34; def __init__(self, window_region_ratio=None, clahe_clip=None): &#34;&#34;&#34; åˆå§‹åŒ–æ›å…‰æ ¡æ­£å™¨ å‚æ•°: window_region_ratio: å›¾åƒå·¦ä¾§è¢«è§†ä¸ºçª—å£åŒºåŸŸçš„æ¯”ä¾‹ clahe_clip: CLAHEå¯¹æ¯”åº¦é™åˆ¶å‚æ•° &#34;&#34;&#34; self.window_region_ratio = window_region_ratio or config.EXPOSURE_WINDOW_REGION_RATIO self.clahe_clip = clahe_clip or config.EXPOSURE_CORRECTION_CLAHE_CLIP self.clahe = cv2.createCLAHE(clipLimit=self.clahe_clip, tileGridSize=config.CLAHE_GRID_SIZE) æ ¸å¿ƒç±» ExposureCorrection å®ç°äº†æ•´ä¸ªæ›å…‰æ ¡æ­£çš„é€»è¾‘ã€‚æ„é€ å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå…³é”®å‚æ•°ï¼š">
    <meta itemprop="datePublished" content="2024-04-04T00:00:00+00:00">
    <meta itemprop="dateModified" content="2024-04-04T00:00:00+00:00">
    <meta itemprop="wordCount" content="333">
    <title>ç›‘æ§è§†é¢‘çª—å£è¿‡æ›æ ¡æ­£æ–¹æ¡ˆè®¾è®¡ :: AK-journey</title>
    <link href="/ai-projects/exposure-correction/index.xml" rel="alternate" type="application/rss+xml" title="ç›‘æ§è§†é¢‘çª—å£è¿‡æ›æ ¡æ­£æ–¹æ¡ˆè®¾è®¡ :: AK-journey">
    <link href="/ai-projects/exposure-correction/index.print.html" rel="alternate" type="text/html" title="ç›‘æ§è§†é¢‘çª—å£è¿‡æ›æ ¡æ­£æ–¹æ¡ˆè®¾è®¡ :: AK-journey">
    <link href="/fonts/fontawesome/css/fontawesome-all.min.css?1743783977" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/fonts/fontawesome/css/fontawesome-all.min.css?1743783977" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar/perfect-scrollbar.min.css?1743783977" rel="stylesheet">
    <link href="/css/theme.min.css?1743783977" rel="stylesheet">
    <link href="/css/format-html.min.css?1743783977" rel="stylesheet" id="R-format-style">
    <link href="/css/auto-complete/auto-complete.min.css?1743783977" rel="stylesheet">
    <script src="/js/auto-complete/auto-complete.min.js?1743783977" defer></script>
    <script src="/js/lunr/lunr.min.js?1743783977" defer></script>
    <script src="/js/lunr/lunr.stemmer.support.min.js?1743783977" defer></script>
    <script src="/js/lunr/lunr.multi.min.js?1743783977" defer></script>
    <script src="/js/lunr/lunr.en.min.js?1743783977" defer></script>
    <script src="/js/search.min.js?1743783977" defer></script>
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/ai-projects\/exposure-correction\/index.html';
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..';
      window.relearn.absBaseUri='https:\/\/wangxupeng.github.io';
      window.relearn.contentLangs=['en'];
      window.relearn.index_js_url="/searchindex.en.js?1743783977";
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=false;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // variant stuff
      window.relearn.themevariants = [ 'relearn-light' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
      // translations
      window.T_Copy_to_clipboard = `Copy to clipboard`;
      window.T_Copied_to_clipboard = `Copied to clipboard!`;
      window.T_Copy_link_to_clipboard = `Copy link to clipboard`;
      window.T_Link_copied_to_clipboard = `Copied link to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
    </script>
    <link href="/css/custom.css?1743783977" rel="stylesheet">
    
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  </head>
  <body class="mobile-support html" data-url="/ai-projects/exposure-correction/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#1-é¡¹ç›®èƒŒæ™¯">1. é¡¹ç›®èƒŒæ™¯</a></li>
    <li><a href="#2-è®¾è®¡ç†å¿µ">2. è®¾è®¡ç†å¿µ</a>
      <ul>
        <li><a href="#21-åŒºåŸŸåˆ†å‰²">2.1 åŒºåŸŸåˆ†å‰²</a></li>
        <li><a href="#22-å¤šé‡æ›å…‰èåˆ">2.2 å¤šé‡æ›å…‰èåˆ</a></li>
        <li><a href="#23-å±€éƒ¨ä¼˜åŒ–">2.3 å±€éƒ¨ä¼˜åŒ–</a></li>
      </ul>
    </li>
    <li><a href="#3-å¤„ç†æµç¨‹">3. å¤„ç†æµç¨‹</a></li>
    <li><a href="#4-ä»£ç å®ç°">4. ä»£ç å®ç°</a>
      <ul>
        <li><a href="#41-æ ¸å¿ƒç±»è®¾è®¡">4.1 æ ¸å¿ƒç±»è®¾è®¡</a></li>
        <li><a href="#42-æ›å…‰æ ¡æ­£æµç¨‹">4.2 æ›å…‰æ ¡æ­£æµç¨‹</a></li>
        <li><a href="#43-æ‰¹å¤„ç†åŠŸèƒ½">4.3 æ‰¹å¤„ç†åŠŸèƒ½</a></li>
      </ul>
    </li>
    <li><a href="#5-å®ç°æ•ˆæœ">5. å®ç°æ•ˆæœ</a></li>
    <li><a href="#6-å±€é™ä¸æ”¹è¿›æ–¹å‘">6. å±€é™ä¸æ”¹è¿›æ–¹å‘</a></li>
    <li><a href="#7-æ€»ç»“">7. æ€»ç»“</a></li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList">
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/index.html"><span itemprop="name">Welcome to AK-journey</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li>
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/ai-projects/index.html"><span itemprop="name">AIé¡¹ç›®åˆ†äº«</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li>
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">ç›‘æ§è§†é¢‘çª—å£è¿‡æ›æ ¡æ­£æ–¹æ¡ˆè®¾è®¡</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-print" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/ai-projects/exposure-correction/index.print.html" title="Print whole chapter (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/ai-projects/index.html" title="AIé¡¹ç›®åˆ†äº« (ğŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="/about/index.html" title="å…³äºæˆ‘ (ğŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable ai-projects" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="ç›‘æ§è§†é¢‘çª—å£è¿‡æ›æ ¡æ­£æ–¹æ¡ˆè®¾è®¡">ç›‘æ§è§†é¢‘çª—å£è¿‡æ›æ ¡æ­£æ–¹æ¡ˆè®¾è®¡</h1>

<h2 id="1-é¡¹ç›®èƒŒæ™¯">1. é¡¹ç›®èƒŒæ™¯</h2>
<p>æœ€è¿‘åœ¨åšä¸€ä¸ªç›‘æ§è§†é¢‘ç†è§£çš„é¡¹ç›®ï¼Œå‘ç°è®¸å¤šç›‘æ§ç”»é¢å­˜åœ¨ä¸¥é‡çš„çª—å£åŒºåŸŸè¿‡æ›é—®é¢˜â€”â€”ç”±äºçª—å¤–å…‰çº¿è¿‡å¼ºï¼Œæ‘„åƒå¤´æ‹æ‘„çš„çª—æˆ·åŒºåŸŸå¸¸å‘ˆç°ä¸€ç‰‡æƒ¨ç™½ï¼Œç»†èŠ‚å®Œå…¨ä¸¢å¤±ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å°è¯•ç”¨ä¼ ç»Ÿå›¾åƒå¤„ç†æ–¹æ³•è®¾è®¡äº†ä¸€å¥—æ›å…‰æ ¡æ­£æ–¹æ¡ˆã€‚æœ¬æ–‡å°†è¯¦ç»†è§£è¯»æ ¸å¿ƒæ€è·¯å’Œå®ç°æµç¨‹ã€‚</p>
<h2 id="2-è®¾è®¡ç†å¿µ">2. è®¾è®¡ç†å¿µ</h2>
<p>è¯¥æ›å…‰æ ¡æ­£æ–¹æ¡ˆçš„æ ¸å¿ƒç›®æ ‡æ˜¯è§£å†³ç›‘æ§æ‘„åƒå¤´æ‹æ‘„ç”»é¢ä¸­çª—å£åŒºåŸŸçš„è¿‡æ›é—®é¢˜ã€‚è®¾è®¡æ€è·¯ä¸»è¦å›´ç»•ä»¥ä¸‹å‡ ä¸ªå…³é”®ç‚¹å±•å¼€ï¼š</p>
<h3 id="21-åŒºåŸŸåˆ†å‰²">2.1 åŒºåŸŸåˆ†å‰²</h3>
<p><strong>é—®é¢˜èƒŒæ™¯</strong>ï¼š</p>
<ul>
<li>åœ¨ç›‘æ§æ‘„åƒå¤´æ‹æ‘„çš„ç”»é¢ä¸­ï¼Œçª—å£åŒºåŸŸé€šå¸¸ä½äºå›¾åƒå·¦ä¾§</li>
<li>ç”±äºå¤–éƒ¨å…‰çº¿å¼ºçƒˆï¼Œè¿™äº›åŒºåŸŸå®¹æ˜“å‡ºç°è¿‡æ›ç°è±¡</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>å‡è®¾çª—å£åŒºåŸŸä½äºå›¾åƒå·¦ä¾§ï¼Œé€šè¿‡ <code>window_region_ratio</code> å‚æ•°æŒ‡å®šçª—å£åŒºåŸŸçš„æ¯”ä¾‹ï¼ˆé»˜è®¤ä¸º0.4ï¼‰</li>
<li>å…·ä½“å®ç°ä¸ºï¼š<code>window_roi = flow[:, :int(w * window_region_ratio)]</code></li>
<li>ä½¿ç”¨æ©ç ï¼ˆwindow_maskï¼‰æ ‡è®°çª—å£åŒºåŸŸï¼Œç”¨äºåç»­å®šå‘å¤„ç†</li>
</ul>
<h3 id="22-å¤šé‡æ›å…‰èåˆ">2.2 å¤šé‡æ›å…‰èåˆ</h3>
<p><strong>é—®é¢˜èƒŒæ™¯</strong>ï¼š</p>
<ul>
<li>è¿‡æ›åŒºåŸŸäº®åº¦å€¼è¿‡é«˜ï¼Œå¯¼è‡´ç»†èŠ‚ä¸¢å¤±</li>
<li>éœ€è¦é€šè¿‡é™ä½äº®åº¦æ¥æ¢å¤ç»†èŠ‚</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ä¼½é©¬æ ¡æ­£ç”Ÿæˆä¸åŒæ›å…‰ç‰ˆæœ¬çš„å›¾åƒï¼š
<ul>
<li>æš—ç‰ˆæœ¬ï¼šé€šè¿‡ä¼½é©¬æ ¡æ­£ï¼ˆgamma_brightï¼‰é™ä½äº®åº¦ï¼Œç”¨äºå¤„ç†è¿‡æ›åŒºåŸŸ</li>
<li>äº®ç‰ˆæœ¬ï¼šé€šè¿‡ä¼½é©¬æ ¡æ­£ï¼ˆgamma_darkï¼‰æé«˜äº®åº¦ï¼ˆå½“å‰ä»£ç ä¸­æœªä½¿ç”¨ï¼‰</li>
</ul>
</li>
<li>åŸºäºç»„åˆæ©ç ï¼ˆcombined_maskï¼‰èåˆä¸åŒæ›å…‰ç‰ˆæœ¬ï¼š
<ul>
<li>è¿‡æ›åŒºåŸŸä½¿ç”¨æš—ç‰ˆæœ¬</li>
<li>å…¶ä»–åŒºåŸŸä¿æŒåŸå›¾</li>
</ul>
</li>
</ul>
<h3 id="23-å±€éƒ¨ä¼˜åŒ–">2.3 å±€éƒ¨ä¼˜åŒ–</h3>
<p><strong>é—®é¢˜èƒŒæ™¯</strong>ï¼š</p>
<ul>
<li>å…¨å±€å¯¹æ¯”åº¦å¢å¼ºå¯èƒ½å¯¼è‡´å±€éƒ¨åŒºåŸŸè¿‡äº®æˆ–è¿‡æš—</li>
<li>éœ€è¦è¿›è¡Œæ›´ç»†è‡´çš„å±€éƒ¨è°ƒæ•´</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>åœ¨äº®åº¦é€šé“ï¼ˆLé€šé“ï¼‰ä¸Šä½¿ç”¨CLAHEï¼ˆå¯¹æ¯”åº¦å—é™è‡ªé€‚åº”ç›´æ–¹å›¾å‡è¡¡ï¼‰å¢å¼ºå±€éƒ¨å¯¹æ¯”åº¦</li>
<li>å°†å›¾åƒè½¬æ¢åˆ°LABè‰²å½©ç©ºé—´ï¼Œå¯¹Lé€šé“åº”ç”¨CLAHEï¼Œç„¶ååˆå¹¶å›RGBå›¾åƒ</li>
</ul>
<h2 id="3-å¤„ç†æµç¨‹">3. å¤„ç†æµç¨‹</h2>
<p>æ•´ä¸ªæ›å…‰æ ¡æ­£ç³»ç»Ÿçš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p><strong>è¾“å…¥å¤„ç†</strong></p>
<ul>
<li>æ”¯æŒå•å¼ å›¾ç‰‡ã€ç›®å½•æˆ–é€šé…ç¬¦è¾“å…¥</li>
<li>æ ¹æ®è¾“å…¥ç±»å‹é€‰æ‹©ç›¸åº”çš„å¤„ç†è·¯å¾„</li>
</ul>
</li>
<li>
<p><strong>å›¾åƒåŠ è½½ä¸é¢„å¤„ç†</strong></p>
<ul>
<li>ä½¿ç”¨OpenCVåŠ è½½å›¾åƒ</li>
<li>è°ƒç”¨ExposureCorrectionç±»çš„correctæ–¹æ³•è¿›è¡Œæ›å…‰æ ¡æ­£</li>
</ul>
</li>
<li>
<p><strong>çª—å£åŒºåŸŸå¤„ç†</strong></p>
<ul>
<li>åŸºäºå·¦ä¾§æ¯”ä¾‹ç”Ÿæˆçª—å£åŒºåŸŸæ©ç </li>
<li>åœ¨HSVè‰²å½©ç©ºé—´ä¸­æ£€æµ‹è¿‡æ›åŒºåŸŸï¼ˆåƒç´ äº®åº¦&gt;220ï¼‰</li>
<li>ç»“åˆçª—å£æ©ç å’Œè¿‡æ›åŒºåŸŸç”Ÿæˆèåˆæƒé‡æ©ç </li>
</ul>
</li>
<li>
<p><strong>å¤šé‡æ›å…‰èåˆ</strong></p>
<ul>
<li>ç”Ÿæˆæ˜æš—ä¸¤ä¸ªç‰ˆæœ¬</li>
<li>åŸºäºæ©ç è¿›è¡Œå›¾åƒèåˆ</li>
</ul>
</li>
<li>
<p><strong>å¯¹æ¯”åº¦å¢å¼º</strong></p>
<ul>
<li>åœ¨LABè‰²å½©ç©ºé—´ä¸­å¯¹Lé€šé“åº”ç”¨CLAHE</li>
<li>å¢å¼ºå±€éƒ¨ç»†èŠ‚</li>
</ul>
</li>
<li>
<p><strong>ç»“æœè¾“å‡º</strong></p>
<ul>
<li>ä¿å­˜æ ¡æ­£åçš„å›¾åƒ</li>
<li>ç”ŸæˆåŸå›¾ä¸æ ¡æ­£å›¾çš„å¯¹æ¯”è§†å›¾</li>
</ul>
</li>
</ol>
<h2 id="4-ä»£ç å®ç°">4. ä»£ç å®ç°</h2>
<h3 id="41-æ ¸å¿ƒç±»è®¾è®¡">4.1 æ ¸å¿ƒç±»è®¾è®¡</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ExposureCorrection</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;ç”¨äºæ ¡æ­£è¿‡æ›å›¾åƒçš„ç±»&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> __init__(self, window_region_ratio<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>, clahe_clip<span style="color:#f92672">=</span><span style="color:#66d9ef">None</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        åˆå§‹åŒ–æ›å…‰æ ¡æ­£å™¨
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        å‚æ•°:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            window_region_ratio: å›¾åƒå·¦ä¾§è¢«è§†ä¸ºçª—å£åŒºåŸŸçš„æ¯”ä¾‹
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            clahe_clip: CLAHEå¯¹æ¯”åº¦é™åˆ¶å‚æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>window_region_ratio <span style="color:#f92672">=</span> window_region_ratio <span style="color:#f92672">or</span> config<span style="color:#f92672">.</span>EXPOSURE_WINDOW_REGION_RATIO
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>clahe_clip <span style="color:#f92672">=</span> clahe_clip <span style="color:#f92672">or</span> config<span style="color:#f92672">.</span>EXPOSURE_CORRECTION_CLAHE_CLIP
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>clahe <span style="color:#f92672">=</span> cv2<span style="color:#f92672">.</span>createCLAHE(clipLimit<span style="color:#f92672">=</span>self<span style="color:#f92672">.</span>clahe_clip, tileGridSize<span style="color:#f92672">=</span>config<span style="color:#f92672">.</span>CLAHE_GRID_SIZE)</span></span></code></pre></div>
<p>æ ¸å¿ƒç±» <code>ExposureCorrection</code> å®ç°äº†æ•´ä¸ªæ›å…‰æ ¡æ­£çš„é€»è¾‘ã€‚æ„é€ å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå…³é”®å‚æ•°ï¼š</p>
<ul>
<li><code>window_region_ratio</code>ï¼šå®šä¹‰å›¾åƒå·¦ä¾§å¤šå¤§æ¯”ä¾‹è¢«è§†ä¸ºçª—å£åŒºåŸŸ</li>
<li><code>clahe_clip</code>ï¼šCLAHEç®—æ³•çš„å¯¹æ¯”åº¦é™åˆ¶å‚æ•°</li>
</ul>
<h3 id="42-æ›å…‰æ ¡æ­£æµç¨‹">4.2 æ›å…‰æ ¡æ­£æµç¨‹</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">correct</span>(self, image):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    æ ¡æ­£è¿‡æ›å›¾åƒ
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    å‚æ•°:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        image: è¾“å…¥çš„BGRæ ¼å¼å›¾åƒï¼ˆOpenCVé»˜è®¤æ ¼å¼ï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    è¿”å›:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        æ ¡æ­£åçš„BGRæ ¼å¼å›¾åƒ
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># è½¬æ¢ä¸ºRGBæ ¼å¼å¤„ç†</span>
</span></span><span style="display:flex;"><span>    rgb_image <span style="color:#f92672">=</span> cv2<span style="color:#f92672">.</span>cvtColor(image, cv2<span style="color:#f92672">.</span>COLOR_BGR2RGB)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 1. åˆ›å»ºçª—å£åŒºåŸŸæ©ç </span>
</span></span><span style="display:flex;"><span>    h, w <span style="color:#f92672">=</span> rgb_image<span style="color:#f92672">.</span>shape[:<span style="color:#ae81ff">2</span>]
</span></span><span style="display:flex;"><span>    window_width <span style="color:#f92672">=</span> int(w <span style="color:#f92672">*</span> self<span style="color:#f92672">.</span>window_region_ratio)
</span></span><span style="display:flex;"><span>    window_mask <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>zeros((h, w), dtype<span style="color:#f92672">=</span>np<span style="color:#f92672">.</span>float32)
</span></span><span style="display:flex;"><span>    window_mask[:, :window_width] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1.0</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 2. è¯†åˆ«è¿‡æ›åŒºåŸŸ</span>
</span></span><span style="display:flex;"><span>    hsv <span style="color:#f92672">=</span> cv2<span style="color:#f92672">.</span>cvtColor(rgb_image, cv2<span style="color:#f92672">.</span>COLOR_RGB2HSV)
</span></span><span style="display:flex;"><span>    _, _, v <span style="color:#f92672">=</span> cv2<span style="color:#f92672">.</span>split(hsv)
</span></span><span style="display:flex;"><span>    overexposed <span style="color:#f92672">=</span> (v <span style="color:#f92672">&gt;</span> config<span style="color:#f92672">.</span>OVEREXPOSED_PIXEL_THRESHOLD)<span style="color:#f92672">.</span>astype(np<span style="color:#f92672">.</span>float32)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 3. ç”Ÿæˆèåˆæ©ç </span>
</span></span><span style="display:flex;"><span>    combined_mask <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>clip(window_mask <span style="color:#f92672">+</span> overexposed, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>    combined_mask_3ch <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>repeat(np<span style="color:#f92672">.</span>expand_dims(combined_mask, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>), <span style="color:#ae81ff">3</span>, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 4. HDRé£æ ¼çš„æ›å…‰èåˆ</span>
</span></span><span style="display:flex;"><span>    img_float <span style="color:#f92672">=</span> rgb_image<span style="color:#f92672">.</span>astype(np<span style="color:#f92672">.</span>float32) <span style="color:#f92672">/</span> <span style="color:#ae81ff">255.0</span>
</span></span><span style="display:flex;"><span>    img_dark <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>power(img_float, <span style="color:#ae81ff">1.5</span>)  <span style="color:#75715e"># é™ä½äº®åº¦</span>
</span></span><span style="display:flex;"><span>    result <span style="color:#f92672">=</span> img_dark <span style="color:#f92672">*</span> combined_mask_3ch <span style="color:#f92672">+</span> img_float <span style="color:#f92672">*</span> (<span style="color:#ae81ff">1.0</span> <span style="color:#f92672">-</span> combined_mask_3ch)
</span></span><span style="display:flex;"><span>    result <span style="color:#f92672">=</span> (result <span style="color:#f92672">*</span> <span style="color:#ae81ff">255</span>)<span style="color:#f92672">.</span>astype(np<span style="color:#f92672">.</span>uint8)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 5. å¢å¼ºå¯¹æ¯”åº¦</span>
</span></span><span style="display:flex;"><span>    lab <span style="color:#f92672">=</span> cv2<span style="color:#f92672">.</span>cvtColor(result, cv2<span style="color:#f92672">.</span>COLOR_RGB2LAB)
</span></span><span style="display:flex;"><span>    l, a, b <span style="color:#f92672">=</span> cv2<span style="color:#f92672">.</span>split(lab)
</span></span><span style="display:flex;"><span>    l_clahe <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>clahe<span style="color:#f92672">.</span>apply(l)
</span></span><span style="display:flex;"><span>    enhanced_lab <span style="color:#f92672">=</span> cv2<span style="color:#f92672">.</span>merge([l_clahe, a, b])
</span></span><span style="display:flex;"><span>    enhanced_rgb <span style="color:#f92672">=</span> cv2<span style="color:#f92672">.</span>cvtColor(enhanced_lab, cv2<span style="color:#f92672">.</span>COLOR_LAB2RGB)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> cv2<span style="color:#f92672">.</span>cvtColor(enhanced_rgb, cv2<span style="color:#f92672">.</span>COLOR_RGB2BGR)</span></span></code></pre></div>
<p>ä»£ç å®ç°äº†å‰é¢æè¿°çš„å®Œæ•´å¤„ç†æµç¨‹ï¼š</p>
<ol>
<li>
<p><strong>å›¾åƒæ ¼å¼è½¬æ¢</strong>ï¼šå°†è¾“å…¥çš„BGRæ ¼å¼å›¾åƒè½¬æ¢ä¸ºRGBæ ¼å¼è¿›è¡Œå¤„ç†</p>
</li>
<li>
<p><strong>çª—å£åŒºåŸŸæ©ç ç”Ÿæˆ</strong>ï¼š</p>
<ul>
<li>æ ¹æ® <code>window_region_ratio</code> å‚æ•°è®¡ç®—çª—å£å®½åº¦</li>
<li>åˆ›å»ºäºŒå€¼æ©ç ï¼Œå°†å·¦ä¾§åŒºåŸŸæ ‡è®°ä¸º1</li>
</ul>
</li>
<li>
<p><strong>è¿‡æ›åŒºåŸŸæ£€æµ‹</strong>ï¼š</p>
<ul>
<li>è½¬æ¢åˆ°HSVè‰²å½©ç©ºé—´</li>
<li>ä½¿ç”¨äº®åº¦é€šé“ï¼ˆVï¼‰æ£€æµ‹è¿‡æ›åƒç´ ï¼ˆé˜ˆå€¼ä¸º220ï¼‰</li>
</ul>
</li>
<li>
<p><strong>æ©ç èåˆ</strong>ï¼š</p>
<ul>
<li>åˆå¹¶çª—å£åŒºåŸŸæ©ç å’Œè¿‡æ›åŒºåŸŸæ©ç </li>
<li>æ‰©å±•åˆ°3é€šé“ä»¥ä¾¿ä¸RGBå›¾åƒè¿ç®—</li>
</ul>
</li>
<li>
<p><strong>å¤šé‡æ›å…‰èåˆ</strong>ï¼š</p>
<ul>
<li>ç”Ÿæˆæš—ç‰ˆæœ¬å›¾åƒï¼ˆgamma=1.5ï¼‰</li>
<li>æ ¹æ®æ©ç åœ¨åŸå›¾å’Œæš—ç‰ˆæœ¬ä¹‹é—´è¿›è¡ŒåŠ æƒèåˆ</li>
</ul>
</li>
<li>
<p><strong>å±€éƒ¨å¯¹æ¯”åº¦å¢å¼º</strong>ï¼š</p>
<ul>
<li>è½¬æ¢åˆ°LABè‰²å½©ç©ºé—´</li>
<li>å¯¹Lé€šé“åº”ç”¨CLAHEç®—æ³•</li>
<li>åˆå¹¶é€šé“å¹¶è½¬å›BGRæ ¼å¼</li>
</ul>
</li>
</ol>
<h3 id="43-æ‰¹å¤„ç†åŠŸèƒ½">4.3 æ‰¹å¤„ç†åŠŸèƒ½</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">process_images</span>(input_paths, output_dir<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;./processed_images&#34;</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    æ‰¹é‡å¤„ç†å›¾åƒ
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    å‚æ•°:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        input_paths: è¾“å…¥è·¯å¾„åˆ—è¡¨ï¼ˆå¯ä»¥æ˜¯æ–‡ä»¶ã€ç›®å½•æˆ–é€šé…ç¬¦ï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        output_dir: è¾“å‡ºç›®å½•
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    os<span style="color:#f92672">.</span>makedirs(output_dir, exist_ok<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>    corrector <span style="color:#f92672">=</span> ExposureCorrection()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> input_path <span style="color:#f92672">in</span> input_paths:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>isdir(input_path):
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># å¤„ç†ç›®å½•ä¸­çš„æ‰€æœ‰å›¾åƒ</span>
</span></span><span style="display:flex;"><span>            image_files <span style="color:#f92672">=</span> glob<span style="color:#f92672">.</span>glob(os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(input_path, <span style="color:#e6db74">&#34;*.jpg&#34;</span>)) <span style="color:#f92672">+</span> \
</span></span><span style="display:flex;"><span>                         glob<span style="color:#f92672">.</span>glob(os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(input_path, <span style="color:#e6db74">&#34;*.jpeg&#34;</span>)) <span style="color:#f92672">+</span> \
</span></span><span style="display:flex;"><span>                         glob<span style="color:#f92672">.</span>glob(os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(input_path, <span style="color:#e6db74">&#34;*.png&#34;</span>))
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> img_file <span style="color:#f92672">in</span> image_files:
</span></span><span style="display:flex;"><span>                process_single_image(img_file, output_dir, corrector)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">elif</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>isfile(input_path):
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># å¤„ç†å•ä¸ªæ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>            process_single_image(input_path, output_dir, corrector)</span></span></code></pre></div>
<p>æ‰¹å¤„ç†åŠŸèƒ½æ”¯æŒï¼š</p>
<ul>
<li>å¤„ç†å•ä¸ªå›¾åƒæ–‡ä»¶</li>
<li>å¤„ç†æ•´ä¸ªç›®å½•ä¸­çš„æ‰€æœ‰å›¾åƒ</li>
<li>æ”¯æŒé€šé…ç¬¦åŒ¹é…å¤šä¸ªæ–‡ä»¶</li>
<li>è‡ªåŠ¨åˆ›å»ºè¾“å‡ºç›®å½•</li>
<li>ç”ŸæˆåŸå›¾ä¸å¤„ç†åçš„å¯¹æ¯”å›¾</li>
</ul>
<h2 id="5-å®ç°æ•ˆæœ">5. å®ç°æ•ˆæœ</h2>
<p><a href="#R-image-0cf0c070e34eb3f63f24c0fb94c914c3" class="lightbox-link"><img alt="ç›‘æ§è§†é¢‘çª—å£è¿‡æ›æ ¡æ­£æ•ˆæœå¯¹æ¯”" class="lazy lightbox figure-image" loading="lazy" src="/ai-projects/exposure-correction/images/exposure-comparison.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-0cf0c070e34eb3f63f24c0fb94c914c3"><img alt="ç›‘æ§è§†é¢‘çª—å£è¿‡æ›æ ¡æ­£æ•ˆæœå¯¹æ¯”" class="lazy lightbox lightbox-image" loading="lazy" src="/ai-projects/exposure-correction/images/exposure-comparison.png"></a></p>
<p>ä¸Šå›¾å±•ç¤ºäº†ç®—æ³•çš„å¤„ç†æ•ˆæœï¼š</p>
<ul>
<li>å·¦å›¾ä¸ºåŸå§‹ç›‘æ§ç”»é¢ï¼Œå¯ä»¥çœ‹åˆ°çª—æˆ·åŒºåŸŸä¸¥é‡è¿‡æ›ï¼Œç»†èŠ‚å®Œå…¨ä¸¢å¤±</li>
<li>å³å›¾ä¸ºç»è¿‡æ›å…‰æ ¡æ­£åçš„æ•ˆæœï¼Œçª—æˆ·åŒºåŸŸçš„ç»†èŠ‚å¾—åˆ°äº†æœ‰æ•ˆæ¢å¤ï¼ŒåŒæ—¶ä¿æŒäº†å…¶ä»–åŒºåŸŸçš„æ­£å¸¸æ˜¾ç¤º</li>
</ul>
<p>ä¸»è¦æ”¹è¿›æ•ˆæœï¼š</p>
<ul>
<li>çª—å£åŒºåŸŸç»†èŠ‚å¾—åˆ°æœ‰æ•ˆæ¢å¤</li>
<li>æ•´ä½“ç”»é¢å¯¹æ¯”åº¦é€‚ä¸­</li>
<li>å±€éƒ¨ç»†èŠ‚æ¸…æ™°å¯è§</li>
</ul>
<h2 id="6-å±€é™ä¸æ”¹è¿›æ–¹å‘">6. å±€é™ä¸æ”¹è¿›æ–¹å‘</h2>
<ol>
<li>
<p><strong>çª—å£åŒºåŸŸæ£€æµ‹</strong></p>
<ul>
<li>å½“å‰ä½¿ç”¨å›ºå®šæ¯”ä¾‹åˆ’åˆ†å¯èƒ½ä¸å¤Ÿçµæ´»</li>
<li>å¯ä»¥è€ƒè™‘å¼•å…¥ç›®æ ‡æ£€æµ‹ç®—æ³•è‡ªåŠ¨è¯†åˆ«çª—å£åŒºåŸŸ</li>
</ul>
</li>
<li>
<p><strong>å‚æ•°è°ƒä¼˜</strong></p>
<ul>
<li>ä¼½é©¬æ ¡æ­£å‚æ•°éœ€è¦æ ¹æ®å…·ä½“åœºæ™¯è°ƒæ•´</li>
<li>å¯ä»¥è€ƒè™‘å¼•å…¥è‡ªé€‚åº”å‚æ•°è°ƒæ•´æœºåˆ¶</li>
</ul>
</li>
<li>
<p><strong>å®æ—¶æ€§èƒ½</strong></p>
<ul>
<li>å¤šé‡æ›å…‰èåˆè®¡ç®—é‡è¾ƒå¤§</li>
<li>å¯ä»¥è€ƒè™‘ä½¿ç”¨GPUåŠ é€Ÿæˆ–ç®€åŒ–ç®—æ³•</li>
</ul>
</li>
</ol>
<h2 id="7-æ€»ç»“">7. æ€»ç»“</h2>
<p>æœ¬æ–‡æå‡ºçš„æ›å…‰æ ¡æ­£æ–¹æ¡ˆé€šè¿‡åŒºåŸŸåˆ†å‰²ã€å¤šé‡æ›å…‰èåˆå’Œå±€éƒ¨ä¼˜åŒ–ä¸‰ä¸ªå…³é”®æ­¥éª¤ï¼Œæœ‰æ•ˆè§£å†³äº†ç›‘æ§è§†é¢‘ä¸­çª—å£åŒºåŸŸè¿‡æ›çš„é—®é¢˜ã€‚è™½ç„¶è¿˜å­˜åœ¨ä¸€äº›å±€é™æ€§ï¼Œä½†æ•´ä½“æ•ˆæœè‰¯å¥½ï¼Œä¸ºç›‘æ§è§†é¢‘å›¾åƒè´¨é‡æå‡æä¾›äº†ä¸€ä¸ªå¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚åç»­å°†ç»§ç»­ä¼˜åŒ–ç®—æ³•ï¼Œæå‡å¤„ç†æ•ˆæœå’Œæ€§èƒ½ã€‚</p>

  <footer class="footline">
              <i class='fa-fw fas fa-calendar'></i> Apr 4, 2024
  </footer>
</article>
        </div>
      </main>
    </div>

<aside id="R-sidebar" class="default-animation">
  <div id="R-header-topbar" class="default-animation"></div>
  <div id="R-header-wrapper" class="default-animation">
    <div id="R-header" class="default-animation">
      <div class="logo-title" style="display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
        <img src="/images/head.png" alt="Logo" style="width: 48px; height: 48px; display: inline-block;">
        <a id="R-logo" class="R-default" href="/">
          <div class="logo-title">AK-journey</div>
        </a>
      </div>
    </div>
      <search><form action="/search/index.html" method="get">
        <div class="searchbox default-animation">
          <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
          <label class="a11y-only" for="R-search-by">Search</label>
          <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
          <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times"></i></button>
        </div>
      </form></search>
  </div>
  <div id="R-content-wrapper" class="highlightable">
    <ul class="topics enlarge morespace">
      <li class="dd-item">
        <a href="https://wangxupeng.github.io/" class="padding">
          <i class="fas fa-home"></i>
          <span>ä¸»é¡µ</span>
          <i class="fas fa-check read-icon"></i>
        </a>
      </li>
      
      
      
        
        
          
            <li class="dd-item" data-nav-id="/ai-theory/">
              <a href="/ai-theory/" class="padding">
                <i class='fas fa-book'></i>
                <span>AIç†è®ºçŸ¥è¯†</span>
                <i class="fas fa-check read-icon"></i>
              </a>
            </li>
          
        
          
        
          
        
          
        
      
        
        
          
        
          
            <li class="dd-item" data-nav-id="/ai-projects/">
              <a href="/ai-projects/" class="padding">
                <i class='fas fa-project-diagram'></i>
                <span>AIé¡¹ç›®åˆ†äº«</span>
                <i class="fas fa-check read-icon"></i>
              </a>
            </li>
          
        
          
        
          
        
      
        
        
          
        
          
        
          
            <li class="dd-item" data-nav-id="/daily/">
              <a href="/daily/" class="padding">
                <i class='fas fa-calendar-day'></i>
                <span>æ—¥å¸¸å†…å®¹</span>
                <i class="fas fa-check read-icon"></i>
              </a>
            </li>
          
        
          
        
      
        
        
          
        
          
        
          
        
          
            <li class="dd-item" data-nav-id="/about/">
              <a href="/about/" class="padding">
                <i class='fas fa-user'></i>
                <span>å…³äºæˆ‘</span>
                <i class="fas fa-check read-icon"></i>
              </a>
            </li>
          
        
      
    </ul>
    <div id="R-footer-margin"></div>
    <div id="R-footer">
      <div class="social-links">
        <a href="https://github.com/wangxupeng" target="_blank" title="GitHub">
          <i class="fab fa-github"></i>
        </a>
        <a href="https://medium.com/@marvelous_catawba_otter_200" target="_blank" title="Medium">
          <i class="fab fa-medium"></i>
        </a>
        <a href="https://www.linkedin.com/in/xupeng-wang-ai/" target="_blank" title="LinkedIn">
          <i class="fab fa-linkedin"></i>
        </a>
        <a href="https://mp.weixin.qq.com/s/UEQbGJ3kJXXJfAKroBf-JA" target="_blank" title="å¾®ä¿¡å…¬ä¼—å·">
          <i class="fab fa-weixin"></i>
        </a>
      </div>
      <div class="footer-stats" style="text-align: center; padding: 10px; background: rgba(255,255,255,0.1); margin: 10px; border-radius: 4px;">
        <span id="busuanzi_container_site_pv" style="display: inline;">
            <i class="fas fa-eye"></i> è®¿é—®é‡ <span id="busuanzi_value_site_pv"></span>
        </span>
      </div>
      
    </div>
  </div>
</aside>

<style>
 
.sub-menu {
  display: none;
  margin-left: 1rem;
  transition: all 0.3s ease;
}

.dd-item.parent.show > .sub-menu {
  display: block;
}

 
.dd-item.parent > a:hover {
  background-color: rgba(0, 0, 0, 0.1);
}

.social-links {
  display: flex;
  justify-content: center;
  gap: 1rem;
  padding: 1rem 0;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  margin-top: 1rem;
}

.social-links a {
  color: #fff;
  font-size: 1.2rem;
  opacity: 0.7;
  transition: opacity 0.3s ease;
}

.social-links a:hover {
  opacity: 1;
}

 
.footer-stats {
  color: #fff;
  font-size: 0.9rem;
}

.footer-stats span {
  display: inline-block;
  margin: 5px 0;
}

.footer-stats i {
  margin-right: 5px;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  
  document.querySelectorAll('.dd-item.parent > a').forEach(function(item) {
    item.addEventListener('click', function(e) {
      e.preventDefault();
      const parent = this.parentElement;
      
      
      if (parent.classList.contains('show')) {
        parent.classList.remove('show');
      } else {
        
        document.querySelectorAll('.dd-item.parent.show').forEach(function(el) {
          if (el !== parent) {
            el.classList.remove('show');
          }
        });
        
        parent.classList.add('show');
      }

      
      if (this.href) {
        window.location.href = this.href;
      }
    });
  });

  
  document.addEventListener('click', function(e) {
    if (!e.target.closest('.dd-item.parent')) {
      document.querySelectorAll('.dd-item.parent.show').forEach(function(el) {
        el.classList.remove('show');
      });
    }
  });
});
</script> 
    <script src="/js/clipboard/clipboard.min.js?1743783977" defer></script>
    <script src="/js/perfect-scrollbar/perfect-scrollbar.min.js?1743783977" defer></script>
    <script src="/js/theme.min.js?1743783977" defer></script>


<div class="footer-stats" style="text-align: center; margin-top: 10px; padding: 10px 0; background: rgba(0,0,0,0.05); position: fixed; bottom: 0; left: 0; right: 0;">
    <span id="busuanzi_container_site_pv" style="display: inline;">
        <i class="fas fa-eye"></i> è®¿é—®é‡ <span id="busuanzi_value_site_pv"></span>
    </span>
</div>
  </body>
</html> 